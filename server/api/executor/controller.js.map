{"version":3,"sources":["../../../../server/api/executor/controller.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;sBAEC,QAAQ;;;;AACtB,IAAI,WAAW,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AACzC,IAAI,mBAAmB,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;;AAEzD,IAAI,KAAK,GAAG,EAAE,CAAC;AACf,SAAS,iBAAiB,CAAC,GAAG,EAAE,UAAU,EAAE;AAC1C,YAAU,GAAG,UAAU,IAAI,GAAG,CAAC;AAC/B,SAAO,UAAU,MAAM,EAAE;AACvB,QAAI,MAAM,EAAE;AACV,SAAG,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KACrC;GACF,CAAC;CACH;;;;;;;;;;;;;;;;;;;;;AAqBM,SAAS,cAAc,CAAC,GAAG,EAAE,GAAG,EAAE;AACvC,mBAAiB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;CACpC;;AAEM,SAAS,OAAO,CAAC,GAAG,EAAE,GAAG,EAAE;AAChC,SAAO,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACtB,MAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI;MACtB,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC;;AAE3B,MAAI,MAAM,GAAG;AACX,OAAG,EAAE,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC;AAC7B,YAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;AAC/D,eAAW,EAAE,GAAG,CAAC,IAAI,CAAC,WAAW;AACjC,eAAW,EAAE,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC;AACxE,aAAS,EAAE,GAAG,CAAC,IAAI,CAAC,SAAS,IAAI,KAAK;AACtC,gBAAY,EAAE,GAAG,CAAC,IAAI,CAAC,YAAY;AACnC,SAAK,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK;GACtB,CAAC;AACF,SAAO,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;AAC3C,SAAO,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACtB,MAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;AAChB,SAAK,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;GAC7B;AACD,SAAO,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;AAClC,MAAI,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC;AAC/C,mBAAiB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,YAAY,CAAC,CAAC;CAE3C","file":"controller.js","sourcesContent":["'use strict';\n\nimport _ from 'lodash';\nvar Slot_Server = require('Slot_Server');\nvar JackOrBetter_Server = require('JackOrBetter_Server');\n\nvar cache = {};\nfunction respondWithResult(res, statusCode) {\n  statusCode = statusCode || 200;\n  return function (entity) {\n    if (entity) {\n      res.status(statusCode).json(entity);\n    }\n  };\n}\n\n\n/*\n function handleEntityNotFound(res) {\n return function(entity) {\n if (!entity) {\n res.status(404).end();\n return null;\n }\n return entity;\n };\n }\n\n function handleError(res, statusCode) {\n statusCode = statusCode || 500;\n return function(err) {\n res.status(statusCode).send(err);\n };\n }\n */\nexport function getCachedGames(req, res) {\n  respondWithResult(res, 200)(cache);\n}\n\nexport function execute(req, res) {\n  console.log(req.body);\n  var game = req.body.game,\n    action = req.body.action;\n\n  var params = {\n    bet: parseFloat(req.body.bet),\n    betLevel: req.body.betLevel ? parseFloat(req.body.betLevel) : 0,\n    holdedCards: req.body.holdedCards,\n    betLevelIdx: req.body.betLevelIdx ? parseFloat(req.body.betLevelIdx) : 0,\n    isRestore: req.body.isRestore || false,\n    restoredData: req.body.restoredData,\n    cheat: req.body.cheat\n  };\n  console.log(\"GEE : execute\", game, action);\n  console.log(req.body);\n  if (!cache[game]) {\n    cache[game] = require(game);\n  }\n  console.log(game, action, params);\n  var gameResponse = cache[game][action](params);\n  respondWithResult(res, 200)(gameResponse);\n\n}\n\n"]}