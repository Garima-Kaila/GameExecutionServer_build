{"version":3,"sources":["../../../../src/main/server/api/executor/controller.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;;;;;sBAKM,QAAQ;;;;AAE3B,IAAI,KAAK,GAAG,EAAE,CAAC;AACf,SAAS,iBAAiB,CAAC,GAAG,EAAE,UAAU,EAAE;AACxC,cAAU,GAAG,UAAU,IAAI,GAAG,CAAC;AAC/B,WAAO,UAAU,MAAM,EAAE;AACrB,YAAI,MAAM,EAAE;AACR,eAAG,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACvC;KACJ,CAAC;CACL;;;;;;;;;;;;;;;;;;;;;AAqBM,SAAS,cAAc,CAAC,GAAG,EAAE,GAAG,EAAE;AACrC,qBAAiB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;CACtC;;AAEM,SAAS,OAAO,CAAC,GAAG,EAAE,GAAG,EAAE;AAC9B,QAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI;QACpB,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC;;AAE7B,QAAI,MAAM,GAAG;AACT,WAAG,EAAE,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC;AAC7B,gBAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;AAC/D,mBAAW,EAAE,GAAG,CAAC,IAAI,CAAC,WAAW;AACjC,mBAAW,EAAE,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC;AACxE,iBAAS,EAAE,GAAG,CAAC,IAAI,CAAC,SAAS,IAAI,KAAK;AACtC,oBAAY,EAAE,GAAG,CAAC,IAAI,CAAC,YAAY;AACnC,aAAK,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK;AACrB,eAAO,EAAE,GAAG,CAAC,IAAI,CAAC,OAAO;KAC5B,CAAC;;AAEF,wBAAO,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;;AAE7D,QAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;AACd,aAAK,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;KAC/B;AACD,QAAI,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC;AAC/C,qBAAiB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,YAAY,CAAC,CAAC;CAC7C","file":"controller.js","sourcesContent":["'use strict';\n\n//import _ from 'lodash';\n//var Slot_Server = require('Slot_Server');\n//var JackOrBetter_Server = require('JackOrBetter_Server');\nimport logger from 'logger';\n\nvar cache = {};\nfunction respondWithResult(res, statusCode) {\n    statusCode = statusCode || 200;\n    return function (entity) {\n        if (entity) {\n            res.status(statusCode).json(entity);\n        }\n    };\n}\n\n\n/*\n function handleEntityNotFound(res) {\n return function(entity) {\n if (!entity) {\n res.status(404).end();\n return null;\n }\n return entity;\n };\n }\n\n function handleError(res, statusCode) {\n statusCode = statusCode || 500;\n return function(err) {\n res.status(statusCode).send(err);\n };\n }\n */\nexport function getCachedGames(req, res) {\n    respondWithResult(res, 200)(cache);\n}\n\nexport function execute(req, res) {\n    var game = req.body.game,\n        action = req.body.action;\n\n    var params = {\n        bet: parseFloat(req.body.bet),\n        betLevel: req.body.betLevel ? parseFloat(req.body.betLevel) : 0,\n        holdedCards: req.body.holdedCards,\n        betLevelIdx: req.body.betLevelIdx ? parseFloat(req.body.betLevelIdx) : 0,\n        isRestore: req.body.isRestore || false,\n        restoredData: req.body.restoredData,\n        cheat: req.body.cheat,\n        roundId: req.body.roundId\n    };\n\n    logger.trace(game, params.roundId, \"GES\", \"execute\", action);\n\n    if (!cache[game]) {\n        cache[game] = require(game);\n    }\n    var gameResponse = cache[game][action](params);\n    respondWithResult(res, 200)(gameResponse);\n}\n\n"]}