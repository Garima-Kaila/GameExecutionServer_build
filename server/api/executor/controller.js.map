{"version":3,"sources":["../../../../server/api/executor/controller.js"],"names":[],"mappings":"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","file":"controller.js","sourcesContent":["'use strict';\n\nimport _ from 'lodash';\nvar Slot_Server = require('Slot_Server');\nvar JackOrBetter_Server = require('JackOrBetter_Server');\n\nvar cache = {};\nfunction respondWithResult(res, statusCode) {\n    statusCode = statusCode || 200;\n    return function (entity) {\n        if (entity) {\n            res.status(statusCode).json(entity);\n        }\n    };\n}\n\n\n/*\n function handleEntityNotFound(res) {\n return function(entity) {\n if (!entity) {\n res.status(404).end();\n return null;\n }\n return entity;\n };\n }\n\n function handleError(res, statusCode) {\n statusCode = statusCode || 500;\n return function(err) {\n res.status(statusCode).send(err);\n };\n }\n */\nexport function getCachedGames(req, res) {\n    respondWithResult(res, 200)(cache);\n}\n\nexport function execute(req, res) {\n    console.log(req.body);\n    var game = req.body.game,\n        action = req.body.action;\n\n    var params = {\n        bet: parseFloat(req.body.bet),\n        betLevel: req.body.betLevel ? parseFloat(req.body.betLevel) : 0,\n        holdedCards: req.body.holdedCards,\n        betLevelIdx: req.body.betLevelIdx ? parseFloat(req.body.betLevelIdx) : 0,\n        isRestore: req.body.isRestore || false,\n        restoredData: req.body.restoredData,\n        cheat: req.body.cheat\n    };\n    console.log(\"GEE : execute\", game, action);\n    console.log(req.body);\n\n\n    console.log(\"1\");\n    console.log(cache);\n    if (!cache[game]) {\n        console.log(\"2\");\n        cache[game] = require(game);\n    }\n    console.log(\"3\");\n\n    console.log(game, action, params);\n    console.log(\"4\");\n\n    var gameResponse = {};\n    try {\n        console.log(\"5\");\n        console.log(cache);\n        console.log(cache[game]);\n        console.log(cache[game][action]);\n\n        gameResponse = cache[game][action](params);\n    } catch (ex) {\n        console.log(\"6\");\n        console.log(ex);\n    }\n    console.log(\"gameResponse\", gameResponse);\n    respondWithResult(res, 200)(gameResponse);\n\n}\n\n"]}